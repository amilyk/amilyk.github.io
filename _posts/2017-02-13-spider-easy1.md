---
layout:     post
title:      "python开发简单爬虫(1)"
date:       2017-02-13
author:     "xunkang"
header-img: "img/post-bg-version.jpg"
catalog: true
tags:
    - 爬虫
---

### 1 简单爬虫结构

+ URL管理器
+ 网页下载器(urllib2)
+ 网页解析器(Beautiful Soap)

### 2 爬虫简介

​	自动爬取互联网信息的程序。互联网中有URL，但是URL会指向其他URL，形成一张网。

根据主题，爬虫从一个URL出发，能访问所有相关的URL，并得到数据。

### 3 爬虫技术的价值

![](/img/pc.png)

### 4 简单爬虫架构

#### 4.1 简单爬虫结构

![](/img/structure.png)

+ 爬虫调度端：监控爬虫的运行情况
+ URL管理器：将要爬取的URL和已经爬取的URL
+ 网页下载器：**待爬取的URL**被传送给下载器，URL下载下来为字符串。
+ 网页解析器：将下载器获得的字符串解析。一方面得到有价值的数据，另一方面URL都有指向其他网页的URL，这些URL被放进URL管理器，补充**未爬取的URL列表**。

#### 4.2 简单爬虫运行流程

![](/img/stream.png)

​	便于记忆：所有的交互都是调度器与它们交互，而URL管理器、下载器、解析器、应用间不直接交互，调度器像个中介。

### 5 URL 管理器

#### 5.1 URL管理器介绍

​	防止重复抓取，因为一个URL会指向其他URL，其他URL也有可能指向这个URL。

+ 添加新URL（是否新URL是否在管理器中）
+ 获取待爬取URL（管理器中是否还有待爬取的URL）->获取后，待爬取URL移动至已爬取

#### 5.2 URL管理器实现

1. URL存储在内存中，用set()存储待爬虫URL和已爬取的URL。set结构会去重复。【爬虫实例采用】
2. URL存储在关系数据库中，建立二维表，第一列为URL地址，第二列为是否爬取的。
3. 缓存数据库
